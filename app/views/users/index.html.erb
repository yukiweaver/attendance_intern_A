<%# リスト 10.37: ユーザーのindexビュー %>
<% provide(:title, 'ユーザー一覧') %>
<h1>ユーザー一覧</h1>

<!-- 勤怠A：csvファイルをアップロードする入力フィールドを追加 -->
<%= form_tag import_users_path, multipart: true, method: :post do %>
  <div class="file_search">
    <%= text_field_tag :filename, "", id: 'filename', disabled: true %>
    <%= file_field_tag :file, id: 'file_input', style: 'display: none', onchange: "file_selected($(this));" %>
    <%= button_tag "ファイルを選択", class: 'btn btn-primary', type: 'button', onclick: "$('#file_input').click();" %></br></br>
    <%#= submit_tag "csvをインポート", class: "btn btn-primary" %>
    <button type='submit', class='btn btn-primary'>csvをインポート</button>
  </div>
<% end %>

<ul class="users">
  <%= render @users %>
</ul>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@user, url: "/users/#{@user.id}", method: :patch) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>  <%# リスト 13.44 %>

      <%= f.label :名前 %>
      <%= f.text_field :name, class: 'form-control' %>

      <%= f.label :メールアドレス %>
      <%= f.email_field :email, class: 'form-control' %>
      
      <%= f.label :所属 %>
      <%= f.text_field :belong, class: 'form-control' %>

      <%= f.label :社員番号 %>
      <%= f.number_field :number, class: 'form-control' %>
      
      <%= f.label :カードID %>
      <%= f.number_field :card_number, class: 'form-control' %>
      
      <%= f.label :パスワード %>
      <%= f.password_field :password, class: 'form-control' %>
      
      <%= f.label :基本勤務時間 %>
      <%= f.time_field :basic_work_time, class: 'form-control' %>
      
      <%= f.label :指定勤務開始時間 %>
      <%= f.time_field :designate_work_time, class: 'form-control' %>
      
      <%= f.label :指定勤務終了時間 %>
      <%= f.time_field :designate_end_time, class: 'form-control' %>

      <%= f.submit "更新", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>