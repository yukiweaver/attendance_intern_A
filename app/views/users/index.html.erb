<%# リスト 10.37: ユーザーのindexビュー %>
<% provide(:title, 'ユーザー一覧') %>
<h1>ユーザー一覧</h1>

<!-- 勤怠A：csvファイルをアップロードする入力フィールドを追加 -->
<%= form_tag import_users_path, multipart: true, method: :post do %>
  <%= file_field_tag :file %>
  <%= submit_tag "csvをインポート" %>
<% end %>

<%# ページネートの日本語化 %>
<%#= will_paginate @users, :previous_label => '&lt 前へ', :next_label => '次へ &gt' %>    <%# リスト 10.45: indexページでpaginationを使う %>

<!--  pf:検索拡張機能  
<div class="user_search">
<b>ユーザーを検索</b>
<%#= form_tag(users_path, :method => 'get' ) do %>
  <%#= text_field_tag :search %>
  <%#= submit_tag '検索', :name => nil, class: "btn btn-primary" %>
<%# end %>
</div>
-->

<%# リスト 10.52: indexページの完全なリファクタリング %>
<ul class="users">
  <%= render @users %>
</ul>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@user, url: "/users/#{@user.id}", method: :patch) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>  <%# リスト 13.44 %>

      <%= f.label :名前 %>
      <%= f.text_field :name, class: 'form-control' %>

      <%= f.label :メールアドレス %>
      <%= f.email_field :email, class: 'form-control' %>
      
      <%= f.label :所属 %>
      <%= f.text_field :belong, class: 'form-control' %>

      <%= f.label :社員番号 %>
      <%= f.number_field :number, class: 'form-control' %>
      
      <%= f.label :カードID %>
      <%= f.number_field :card_number, class: 'form-control' %>
      
      <%= f.label :パスワード %>
      <%= f.password_field :password, class: 'form-control' %>
      
      <%= f.label :基本勤務時間 %>
      <%= f.time_field :basic_work_time, class: 'form-control' %>
      
      <%= f.label :指定勤務開始時間 %>
      <%= f.time_field :designate_work_time, class: 'form-control' %>
      
      <%= f.label :指定勤務終了時間 %>
      <%= f.time_field :designate_end_time, class: 'form-control' %>

      <%= f.submit "更新", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

<%# ページネートの日本語化 %>
<%#= will_paginate @users, :previous_label => '&lt 前へ', :next_label => '次へ &gt' %>    <%# リスト 10.45: indexページでpaginationを使う %>